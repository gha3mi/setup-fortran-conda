<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Setup Fortran with Conda</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_README.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Setup Fortran with Conda</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md37"></a></p>
<p>A GitHub Action that sets up a Fortran development environment using Conda. Inspired by <a href="https://degenerateconic.com/conda-plus-fortran.html">Conda + Fortran</a>.</p>
<h1><a class="anchor" id="autotoc_md38"></a>
Supported Compiler Configurations</h1>
<p>The selected Fortran compiler is installed along with the corresponding C and C++ compilers, as well as <code>fpm</code>, <code>cmake</code>, <code>ninja</code> and <code>meson</code>. Additional packages can be installed using the <code>extra-packages</code> input.</p>
<h2><a class="anchor" id="autotoc_md39"></a>
Ubuntu</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Fortran Compiler   </th><th class="markdownTableHeadNone">C Compiler   </th><th class="markdownTableHeadNone">C++ Compiler    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gfortran   </td><td class="markdownTableBodyNone">gcc   </td><td class="markdownTableBodyNone">g++    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ifx   </td><td class="markdownTableBodyNone">icx   </td><td class="markdownTableBodyNone">icx    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lfortran   </td><td class="markdownTableBodyNone">clang   </td><td class="markdownTableBodyNone">clang++    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">flang, flang-new   </td><td class="markdownTableBodyNone">clang   </td><td class="markdownTableBodyNone">clang++    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">nvfortran   </td><td class="markdownTableBodyNone">nvc   </td><td class="markdownTableBodyNone">nvc++   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md40"></a>
macOS</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Fortran Compiler   </th><th class="markdownTableHeadNone">C Compiler   </th><th class="markdownTableHeadNone">C++ Compiler    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gfortran   </td><td class="markdownTableBodyNone">gcc   </td><td class="markdownTableBodyNone">g++    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">lfortran   </td><td class="markdownTableBodyNone">clang   </td><td class="markdownTableBodyNone">clang++   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md41"></a>
Windows</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Fortran Compiler   </th><th class="markdownTableHeadNone">C Compiler   </th><th class="markdownTableHeadNone">C++ Compiler    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gfortran   </td><td class="markdownTableBodyNone">gcc   </td><td class="markdownTableBodyNone">g++    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ifx   </td><td class="markdownTableBodyNone">icx   </td><td class="markdownTableBodyNone">icx    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">lfortran   </td><td class="markdownTableBodyNone">clang-cl   </td><td class="markdownTableBodyNone">clang-cl    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">flang, flang-new   </td><td class="markdownTableBodyNone">clang-cl   </td><td class="markdownTableBodyNone">clang-cl   </td></tr>
</table>
<p><b>The following environment variables are automatically set:</b></p>
<ul>
<li><code>FC</code>, <code>CC</code>, <code>CXX</code></li>
<li><code>FPM_FC</code>, <code>FPM_CC</code>, <code>FPM_CXX</code></li>
<li><code>CMAKE_Fortran_COMPILER</code>, <code>CMAKE_C_COMPILER</code>, <code>CMAKE_CXX_COMPILER</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
Simple Usage</h1>
<div class="fragment"><div class="line">name: Setup Fortran Conda CI/CD</div>
<div class="line"> </div>
<div class="line">on: [push]</div>
<div class="line">permissions:</div>
<div class="line">  contents: write</div>
<div class="line">jobs:</div>
<div class="line">  test_fpm:</div>
<div class="line">    name: ${{ matrix.os }}_${{ matrix.compiler }}_fpm</div>
<div class="line">    runs-on: ${{ matrix.os }}</div>
<div class="line">      matrix:</div>
<div class="line">        os: [ubuntu-latest, macos-latest, windows-latest]</div>
<div class="line">        compiler: [gfortran, ifx, lfortran, flang-new, nvfortran]</div>
<div class="line">        exclude:</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: flang-new</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: ifx</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup Fortran</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: ${{ matrix.compiler }}</div>
<div class="line">          platform: ${{ matrix.os }}</div>
<div class="line"> </div>
<div class="line">      - name: fpm test (debug)</div>
<div class="line">        run: fpm test --compiler ${{ matrix.compiler }} --profile debug</div>
<div class="line"> </div>
<div class="line">      - name: fpm test (release)</div>
<div class="line">        run: fpm test --compiler ${{ matrix.compiler }} --profile release</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md43"></a>
✅ CI Status</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Compiler   </th><th class="markdownTableHeadNone">macos   </th><th class="markdownTableHeadNone">ubuntu   </th><th class="markdownTableHeadNone">windows    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>flang-new</code>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ❌ cmake ✅    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>gfortran</code>   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ifx</code>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>lfortran</code>   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">fpm ✅ cmake ❌    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>mpifort</code>   </td><td class="markdownTableBodyNone">mpi_fpm ✅   </td><td class="markdownTableBodyNone">mpi_fpm ✅   </td><td class="markdownTableBodyNone">-    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>nvfortran</code>   </td><td class="markdownTableBodyNone">-   </td><td class="markdownTableBodyNone">fpm ✅ cmake ✅   </td><td class="markdownTableBodyNone">-   </td></tr>
</table>
<ul>
<li><a href="https://github.com/gha3mi/setup-fortran-conda/blob/status-fpm/STATUS.md">STATUS.md (FPM)</a></li>
<li><a href="https://github.com/gha3mi/setup-fortran-conda/blob/status-cmake/STATUS.md">STATUS.md (CMake)</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md44"></a>
📋 Workflow Example</h1>
<h2><a class="anchor" id="autotoc_md45"></a>
🔐 IMPORTANT NOTES</h2>
<blockquote class="doxtable">
<p>⚠️ <b>Use your own name and email!</b> Don’t copy the example values. </p>
</blockquote>
<p>To enable automatic updates to the CI status table in <code>README.md</code> via the <code>update_readme_table</code> job:</p>
<ol type="1">
<li>Create a GitHub <b>Personal Access Token (PAT)</b> with <code>repo</code> scope.</li>
<li>Add it to your repo secrets, e.g. <code>GH_PAT</code>.</li>
<li>Configure these inputs:</li>
</ol>
<div class="fragment"><div class="line">update-readme-token: ${{ secrets.GH_PAT }}</div>
<div class="line">update-readme-user-name: &quot;Your Name&quot;</div>
<div class="line">update-readme-user-email: &quot;you@example.com&quot;</div>
</div><!-- fragment --><p>💡 Tip: When integrating CI/CD, testing often requires multiple commits and iterations. To keep your <code>main</code> branch clean, consider using a separate branch (e.g., <code>dev</code>) for development and testing. Once everything is working, you can merge it into main.</p>
<p>You can include only the jobs you need in your workflow. This example includes all available jobs to demonstrate a comprehensive CI/CD setup.</p>
<h2><a class="anchor" id="autotoc_md46"></a>
Overview</h2>
<p>This example automates Fortran CI/CD:</p>
<ul>
<li>📦 <b>Fortran compiler setup</b>:<ul>
<li>Supports: <code>gfortran</code>, <code>ifx</code>, <code>lfortran</code>, <code>flang-new</code>, <code>nvfortran</code></li>
</ul>
</li>
<li>🖥️ <b>Cross-platform testing</b>:<ul>
<li>Ubuntu, Windows, macOS GitHub runners</li>
</ul>
</li>
<li>🧪 <b>Testing</b>:<ul>
<li><code>fpm</code> test with <code>debug</code> and <code>release</code> profiles</li>
<li><code>CMake</code> with <code>Ninja</code> and <code>CTest</code></li>
<li><code>Meson</code> with <code>Ninja</code></li>
</ul>
</li>
<li>📄 <b>Documentation</b>:<ul>
<li><a href="https://github.com/Fortran-FOSS-Programmers/ford">FORD</a></li>
<li><a href="https://www.doxygen.nl">Doxygen</a></li>
</ul>
</li>
<li>📊 <b>Status Reporting</b>:<ul>
<li>Auto-generates <code>STATUS.md</code> for <code>fpm</code>/<code>cmake</code>/<code>meson</code> test results</li>
<li>Injects summary into <code>README.md</code></li>
<li>creates PRs to update the status table in <code>README.md</code></li>
</ul>
</li>
<li>🧹 <b>Linting</b>:<ul>
<li>Runs Fortitude check</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md47"></a>
README Integration</h2>
<p>To enable automatic CI status table injection, add the following to your <code>README.md</code>:</p>
<pre>
&lt;!-- STATUS:setup-fortran-conda:START --&gt;
&lt;!-- STATUS:setup-fortran-conda:END --&gt;
</pre><h2><a class="anchor" id="autotoc_md48"></a>
Job Breakdown</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Job Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_fpm</code>   </td><td class="markdownTableBodyNone">Run <code>fpm</code> tests (debug + release) for each OS/compiler    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>test_cmake</code>   </td><td class="markdownTableBodyNone">Run CMake/Ninja builds and tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>test_meson</code>   </td><td class="markdownTableBodyNone">Run Meson builds and tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>doc_ford</code>   </td><td class="markdownTableBodyNone">Build and deploy FORD-generated docs    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>doc_doxygen</code>   </td><td class="markdownTableBodyNone">Build and deploy Doxygen-generated docs    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>status_fpm</code>   </td><td class="markdownTableBodyNone">Generate <code>STATUS.md</code> with fpm test results    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>status_cmake</code>   </td><td class="markdownTableBodyNone">Generate <code>STATUS.md</code> with cmake test results    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>status_meson</code>   </td><td class="markdownTableBodyNone">Generate <code>STATUS.md</code> with meson test results    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>update_readme_table</code>   </td><td class="markdownTableBodyNone">Inject CI summary table into <code>README.md</code> and open a pull request    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>linter_fortitude</code>   </td><td class="markdownTableBodyNone">Run <a href="https://github.com/PlasmaFAIR/fortitude">Fortitude</a> linter   </td></tr>
</table>
<p>modify this example workflow file to your needs, and save it as <code>.github/workflows/CI-CD.yml</code> in your repository:</p>
<div class="fragment"><div class="line">name: Setup Fortran Conda CI/CD</div>
<div class="line"> </div>
<div class="line">on:</div>
<div class="line">  push:</div>
<div class="line">    branches: [main, master, dev]</div>
<div class="line"> </div>
<div class="line">permissions:</div>
<div class="line">  contents: write</div>
<div class="line"> </div>
<div class="line">jobs:</div>
<div class="line"> </div>
<div class="line">  # Run FPM tests (debug + release) on all OS/compiler combinations</div>
<div class="line">  test_fpm:</div>
<div class="line">    name: ${{ matrix.os }}_${{ matrix.compiler }}_fpm</div>
<div class="line">    runs-on: ${{ matrix.os }}</div>
<div class="line">    strategy:</div>
<div class="line">      fail-fast: false</div>
<div class="line">      matrix:</div>
<div class="line">        os: [ubuntu-latest, macos-latest, windows-latest]</div>
<div class="line">        compiler: [gfortran, ifx, lfortran, flang-new, nvfortran]</div>
<div class="line">        include:</div>
<div class="line">          - os: ubuntu-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">        exclude:</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: flang-new</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: ifx</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line"> </div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup Fortran</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: ${{ matrix.compiler }}</div>
<div class="line">          platform: ${{ matrix.os }}</div>
<div class="line">          extra-packages: ${{ matrix.extra-packages }}</div>
<div class="line"> </div>
<div class="line">      - name: fpm test (debug)</div>
<div class="line">        run: fpm test --compiler ${{ matrix.compiler }} --profile debug --verbose</div>
<div class="line"> </div>
<div class="line">      - name: fpm test (release)</div>
<div class="line">        run: fpm test --compiler ${{ matrix.compiler }} --profile release --verbose</div>
<div class="line"> </div>
<div class="line">  # Run CMake + Ninja build/tests across OS/compiler matrix</div>
<div class="line">  test_cmake:</div>
<div class="line">    name: ${{ matrix.os }}_${{ matrix.compiler }}_cmake</div>
<div class="line">    runs-on: ${{ matrix.os }}</div>
<div class="line">    strategy:</div>
<div class="line">      fail-fast: false</div>
<div class="line">      matrix:</div>
<div class="line">        os: [ubuntu-latest, macos-latest, windows-latest]</div>
<div class="line">        compiler: [gfortran, ifx, lfortran, flang-new, nvfortran]</div>
<div class="line">        include:</div>
<div class="line">          - os: ubuntu-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">        exclude:</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: flang-new</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: ifx</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line"> </div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup Fortran</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: ${{ matrix.compiler }}</div>
<div class="line">          platform: ${{ matrix.os }}</div>
<div class="line">          extra-packages: ${{ matrix.extra-packages }}</div>
<div class="line"> </div>
<div class="line">      - name: cmake test (debug)</div>
<div class="line">        run: |</div>
<div class="line">          cmake -S . -B build/debug -DCMAKE_BUILD_TYPE=Debug -DCMAKE_Fortran_COMPILER=${{ matrix.compiler }} -G Ninja</div>
<div class="line">          cmake --build build/debug</div>
<div class="line">          ctest --test-dir build/debug --output-on-failure</div>
<div class="line"> </div>
<div class="line">      - name: cmake test (release)</div>
<div class="line">        run: |</div>
<div class="line">          cmake -S . -B build/release -DCMAKE_BUILD_TYPE=Release -DCMAKE_Fortran_COMPILER=${{ matrix.compiler }} -G Ninja</div>
<div class="line">          cmake --build build/release</div>
<div class="line">          ctest --test-dir build/release --output-on-failure</div>
<div class="line"> </div>
<div class="line">  # Run Meson builds and tests across OS/compiler matrix</div>
<div class="line">  test_meson:</div>
<div class="line">    name: ${{ matrix.os }}_${{ matrix.compiler }}_meson</div>
<div class="line">    runs-on: ${{ matrix.os }}</div>
<div class="line">    strategy:</div>
<div class="line">      fail-fast: false</div>
<div class="line">      matrix:</div>
<div class="line">        os: [ubuntu-latest, macos-latest, windows-latest]</div>
<div class="line">        compiler: [gfortran, ifx, lfortran, flang-new, nvfortran]</div>
<div class="line">        include:</div>
<div class="line">          - os: ubuntu-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            extra-packages: &quot;&quot;</div>
<div class="line">        exclude:</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: flang-new</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: ifx</div>
<div class="line">          - os: macos-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line">          - os: windows-latest</div>
<div class="line">            compiler: nvfortran</div>
<div class="line"> </div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup Fortran</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: ${{ matrix.compiler }}</div>
<div class="line">          platform: ${{ matrix.os }}</div>
<div class="line">          extra-packages: ${{ matrix.extra-packages }}</div>
<div class="line"> </div>
<div class="line">      - name: meson test (debug)</div>
<div class="line">        run: |</div>
<div class="line">          meson setup --wipe build/meson/debug --buildtype debug --backend=ninja</div>
<div class="line">          meson compile -C build/meson/debug --verbose</div>
<div class="line">          meson test -C build/meson/debug --verbose</div>
<div class="line"> </div>
<div class="line">      - name: meson test (release)</div>
<div class="line">        run: |</div>
<div class="line">          meson setup --wipe build/meson/release --buildtype release --backend=ninja</div>
<div class="line">          meson compile -C build/meson/release --verbose</div>
<div class="line">          meson test -C build/meson/release --verbose</div>
<div class="line"> </div>
<div class="line">  # Build and deploy FORD documentation</div>
<div class="line">  doc_ford:</div>
<div class="line">    name: Generate FORD Documentation</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup and Generate FORD Documentation</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: gfortran</div>
<div class="line">          generate-doc-ford: true</div>
<div class="line">          ford-working-directory: .</div>
<div class="line">          ford-config: README.md</div>
<div class="line">          ford-output-directory: doc/ford</div>
<div class="line">          ford-branch: gh-pages-ford</div>
<div class="line">          ford-target-folder: doc/ford</div>
<div class="line"> </div>
<div class="line">  # Build and deploy Doxygen documentation</div>
<div class="line">  doc_doxygen:</div>
<div class="line">    name: Generate Doxygen Documentation</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Setup and Generate Doxygen Documentation</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          compiler: gfortran</div>
<div class="line">          generate-doc-doxygen: true</div>
<div class="line">          doxygen-working-directory: .</div>
<div class="line">          doxygen-config: Doxyfile</div>
<div class="line">          doxygen-output-directory: doc/doxygen</div>
<div class="line">          doxygen-branch: gh-pages-doxygen</div>
<div class="line">          doxygen-target-folder: doc/doxygen</div>
<div class="line"> </div>
<div class="line">  # Generate STATUS.md from FPM job results</div>
<div class="line">  status_fpm:</div>
<div class="line">    name: Generate STATUS.md</div>
<div class="line">    if: always()</div>
<div class="line">    needs: test_fpm</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Generate summary</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          generate-status-fpm: true</div>
<div class="line"> </div>
<div class="line">  # Generate STATUS.md from CMake job results</div>
<div class="line">  status_cmake:</div>
<div class="line">    name: Generate STATUS.md</div>
<div class="line">    if: always()</div>
<div class="line">    needs: test_cmake</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Generate summary</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          generate-status-cmake: true</div>
<div class="line"> </div>
<div class="line">  # Generate STATUS.md from Meson job results</div>
<div class="line">  status_meson:</div>
<div class="line">    name: Generate STATUS.md</div>
<div class="line">    if: always()</div>
<div class="line">    needs: test_meson</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Generate summary</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          generate-status-meson: true</div>
<div class="line"> </div>
<div class="line">  # Inject CI status table into README.md</div>
<div class="line">  update_readme_table:</div>
<div class="line">    name: Update README.md status table</div>
<div class="line">    if: |</div>
<div class="line">      always() &amp;&amp;</div>
<div class="line">      github.ref != &#39;refs/heads/update-readme-table&#39;</div>
<div class="line">    needs: [status_fpm, status_cmake]</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Update README status</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          update-readme-table: true</div>
<div class="line">          update-readme-token: ${{ secrets.GH_PAT }}   # Update with your GitHub personal access token</div>
<div class="line">          update-readme-user-name: &quot;Your Name&quot; # Update with your name</div>
<div class="line">          update-readme-user-email: &quot;you@example.com&quot;  # Update with your email</div>
<div class="line"> </div>
<div class="line">  # Run Fortran linter with Fortitude</div>
<div class="line">  linter_fortitude:</div>
<div class="line">    name: Run Fortitude Linter</div>
<div class="line">    runs-on: ubuntu-latest</div>
<div class="line">    steps:</div>
<div class="line">      - name: Run Fortitude Linter</div>
<div class="line">        uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">        with:</div>
<div class="line">          fortitude-check: true</div>
<div class="line">          fortitude-settings: &quot;--output-format github&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md49"></a>
Specifying Compiler Versions</h2>
<p>By default, the above example installs the latest available versions of each compiler. To use a specific version, add a <code>compiler-version</code> entry in your matrix:</p>
<div class="fragment"><div class="line">matrix:</div>
<div class="line">  # os: [ubuntu-latest, macos-latest, windows-latest]</div>
<div class="line">  # compiler: [gfortran, ifx, lfortran, flang-new, nvfortran]</div>
<div class="line">  include:</div>
<div class="line">    # gfortran</div>
<div class="line">    - os: ubuntu-latest</div>
<div class="line">      compiler: gfortran</div>
<div class="line">      compiler-version: 15.1.0</div>
<div class="line">      extra-packages: &quot;&quot;</div>
<div class="line">    - os: macos-latest</div>
<div class="line">      compiler: gfortran</div>
<div class="line">      compiler-version: 15.1.0</div>
<div class="line">      extra-packages: &quot;&quot;</div>
<div class="line">    - os: windows-latest</div>
<div class="line">      compiler: gfortran</div>
<div class="line">      compiler-version: 15.1.0</div>
<div class="line">      extra-packages: &quot;&quot;</div>
</div><!-- fragment --><p>Then, reference <code>compiler-version</code> in the setup step:</p>
<div class="fragment"><div class="line">- name: Setup Fortran</div>
<div class="line">  uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">  with:</div>
<div class="line">    compiler: ${{ matrix.compiler }}</div>
<div class="line">    compiler-version: ${{ matrix.compiler-version }} # must be specified</div>
<div class="line">    platform: ${{ matrix.os }}</div>
<div class="line">    extra-packages: ${{ matrix.extra-packages }}</div>
</div><!-- fragment --><p> If <code>compiler-version</code> is set to an empty string <code>""</code>, the latest version will be installed.</p>
<h2><a class="anchor" id="autotoc_md50"></a>
MPI Support</h2>
<p>MPI-based tests can be executed using fpm with the mpifort. This is currently supported on Linux and macOS runners. The following example job sets up the environment and runs parallel MPI tests:</p>
<div class="fragment"><div class="line">test_mpi_fpm:</div>
<div class="line">  name: ${{ matrix.os }}_${{ matrix.compiler }}_mpi_fpm</div>
<div class="line">  runs-on: ${{ matrix.os }}</div>
<div class="line">  strategy:</div>
<div class="line">    fail-fast: false</div>
<div class="line">    matrix:</div>
<div class="line">      os: [ubuntu-latest, macos-latest]</div>
<div class="line">      compiler: [mpifort]</div>
<div class="line">      include:</div>
<div class="line">        - os: ubuntu-latest</div>
<div class="line">          extra-packages: &quot;&quot;</div>
<div class="line">        - os: macos-latest</div>
<div class="line">          extra-packages: &quot;&quot;</div>
<div class="line"> </div>
<div class="line">  steps:</div>
<div class="line">    - name: Setup Fortran</div>
<div class="line">      uses: gha3mi/setup-fortran-conda@latest</div>
<div class="line">      with:</div>
<div class="line">        compiler: ${{ matrix.compiler }}</div>
<div class="line">        platform: ${{ matrix.os }}</div>
<div class="line">        extra-packages: ${{ matrix.extra-packages }}</div>
<div class="line"> </div>
<div class="line">    - name: fpm test (debug)</div>
<div class="line">      run: fpm test --target mpi_hello --compiler ${{ matrix.compiler }} --profile debug --flag &quot;-cpp -DUSE_MPI&quot; --runner &quot;mpirun -np 4&quot; --verbose</div>
<div class="line"> </div>
<div class="line">    - name: fpm test (release)</div>
<div class="line">      run: fpm test --target mpi_hello --compiler ${{ matrix.compiler }} --profile release --flag &quot;-cpp -DUSE_MPI&quot; --runner &quot;mpirun -np 4&quot; --verbose</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md51"></a>
🚀 Release Automation</h1>
<p>This project includes a Bash script for automating GitHub releases.</p>
<div class="fragment"><div class="line">curl -L https://raw.githubusercontent.com/gha3mi/setup-fortran-conda/main/release.sh -o release.sh</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md52"></a>
Features</h2>
<p>The script automates:</p>
<ul>
<li>✅ <b>Semantic versioning</b>: Calculates the next version (<code>major</code>, <code>minor</code>, or <code>patch</code>) based on PR titles and commit messages.</li>
<li>📝 <b>CHANGELOG generation</b>: Compiles a categorized <code>CHANGELOG.md</code> using PR data and commits since the last release.</li>
<li>🔖 <b>Git tagging</b>: Tags the new version (e.g., <code>v1.2.3</code>) and updates the floating <code>latest</code> tag.</li>
<li>📤 <b>GitHub Release</b>: Publishes a release with autogenerated notes.</li>
<li>💻 <b>Modes</b>:<ul>
<li><code>--dry-run</code>: Simulates the release steps with no side effects.</li>
<li><code>--local</code>: Updates files and tags locally, but skips pushing or publishing the release.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md53"></a>
Requirements</h2>
<ul>
<li><a href="https://cli.github.com/">GitHub CLI (<code>gh</code>)</a> – must be authenticated (<code>gh auth login</code>)</li>
<li><a href="https://stedolan.github.io/jq/"><code>jq</code></a></li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Usage</h2>
<div class="fragment"><div class="line">bash release.sh --help</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md55"></a>
Recommended Workflow</h2>
<p>It’s highly recommended to first run in <code>--dry-run</code> mode to verify the output.</p>
<h1><a class="anchor" id="autotoc_md56"></a>
🔗 See Also</h1>
<ul>
<li><a href="https://github.com/fortran-lang/setup-fortran">fortran-lang/setup-fortran</a></li>
<li><a href="https://degenerateconic.com/conda-plus-fortran.html">https://degenerateconic.com/conda-plus-fortran.html</a></li>
<li><a href="https://fortran-lang.discourse.group/t/github-action-setup-fortran-with-conda/9869/">Fortran Discourse: GitHub Action: Setup Fortran with Conda</a></li>
<li><a href="https://fortran-lang.discourse.group/t/very-simple-ci-workflow-for-fortran-apps-using-conda/9867">Fortran Discourse: Simple CI with Conda</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
